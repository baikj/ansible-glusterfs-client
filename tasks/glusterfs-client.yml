- name: Adds glusterfs client and utilities
  apt:
    pkg: "{{ item }}"
    state: present
  with_items:
    - glusterfs-client
    - nfs-common
    - fio

- name: Ensure the Gluster volume is mounted
  mount:
    name: "{{ item.mount_point }}"
    src: "{{ gluster_servers_group[0] }}:/{{ item.name }}"
    fstype: "{{ item.mount_type }}"
    opts: "{{ item.mount_options | default(gluster_mount_default_options[item.mount_type]) }}"
    state: mounted
  with_items: "{{ gluster_volumes }}"


